<style>
.node {
  stroke: #fff;
  stroke-width: 1.5px;
  fill: white;
}

.link {
  stroke: #999;
  stroke-opacity: .6;
}

text {
  font-family: sans-serif;
  font-size: 14px;
}
</style>
<div id="$tmpid"></div>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
    var data = $data;

    var width = 600;
    var height = 600;

    var svg = d3.select("#$tmpid").append("svg").attr("width", width).attr("height", height)

    svg.selectAll("line")
        .data(data.links)
        .enter().append("line")
        .attr("class", "line")
        .style("stroke", "gray")
        .style("stroke-width", 4)
        .attr("x1", d => d.source.x)
        .attr("y1", d => d.source.y)
        .attr("x2", d => d.target.x)
        .attr("y2", d => d.target.y);

    svg.selectAll("circle")
        .data(data.nodes)
        .enter().append("circle")
        .style("stroke", "white")
        .style("fill", "white")
        .attr("r", 15)
        .attr("cx", d => d.coords.x)
        .attr("cy", d => d.coords.y);

    svg.selectAll("text")
        .data(data.nodes)
        .enter().append("text")
        .text(d => d.text)
        .attr("x", d => d.coords.x)
        .attr("y", d => d.coords.y + 4)
        .style("text-anchor", "middle");
</script>